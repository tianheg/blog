<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-08 Tue 09:01 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nginx Redirect</title>
<meta name="generator" content="Org mode">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/base16/dracula.min.css">
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js"></script>
<link rel="stylesheet" href="/theme/site.css"/>
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "d5b841b503ed4d1b8fad459b84d1cc2f"}'></script>
<script defer src="/theme/main.js"></script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">Nginx Redirect</h1>
</header>
<div id="outline-container-org867c607" class="outline-2">
<h2 id="org867c607">http to https</h2>
<div class="outline-text-2" id="text-org867c607">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #ad8572;">http</span> {
  <span style="color: #ad8572;">server</span> {
    listen 443 ssl;
    server_name www.example.com;
    ssl_certificate /path/to/file;
    ssl_certificate_key /path/to/file;
    ...
  }
  <span style="color: #ad8572;">server</span> {
    listen 80;
    server_name www.example.com;
    rewrite ^(.*) https://$server_name$1 permanent;
  }
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org1bb66d1" class="outline-2">
<h2 id="org1bb66d1">example.com to www.example.com</h2>
<div class="outline-text-2" id="text-org1bb66d1">
<div class="org-src-container">
<pre class="src src-conf"><span style="color: #ad8572;">http</span> {
  <span style="color: #ad8572;">server</span> {
    listen 80;
    server_name www.example.com example.com;
    return 301 https://www.example.com$request_uri;
}
</pre>
</div>

<p>
要记得为根域名添加 DNS 记录，如果不添加的话，怎么改 Nginx 的配置都是不行的。来自我亲身经历的教训：）
</p>
</div>
</div>

<div id="outline-container-org4ff4b89" class="outline-2">
<h2 id="org4ff4b89">References</h2>
<div class="outline-text-2" id="text-org4ff4b89">
<ul class="org-ul">
<li><a href="https://www.linuxcapable.com/how-to-redirect-non-www-www-with-nginx/">How to Redirect NON-WWW &amp; WWW with Nginx - LinuxCapable</a></li>
</ul>
</div>
</div>
</div>
</body>
</html>