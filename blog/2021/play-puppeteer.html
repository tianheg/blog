<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-07 Mon 20:01 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>用 Puppeteer 下载网页 pdf 版本</title>
<meta name="generator" content="Org mode">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/base16/dracula.min.css">
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js"></script>
<link rel="stylesheet" href="/theme/site.css"/>
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "d5b841b503ed4d1b8fad459b84d1cc2f"}'></script>
<script defer src="/theme/main.js"></script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">用 Puppeteer 下载网页 pdf 版本</h1>
</header><div class="org-src-container">
<pre class="src src-sh">mkdir play_puppeteer &amp;&amp; <span style="color: #9fbfdf;">cd</span> $<span style="color: #aaca86;">_</span>
yarn add puppeteer
emacs main.js
node main.js
</pre>
</div>

<p>
<code>main.js</code> ：
</p>

<div class="org-src-container">
<pre class="src src-javascript"><span style="color: #91a0b3;">const</span> <span style="color: #aaca86;">puppeteer</span> = require(<span style="color: #ddbc91;">'puppeteer'</span>);

(<span style="color: #91a0b3;">async</span> () =&gt; {
  <span style="color: #91a0b3;">const</span> <span style="color: #aaca86;">browser</span> = <span style="color: #91a0b3;">await</span> puppeteer.launch();
  <span style="color: #91a0b3;">const</span> <span style="color: #aaca86;">page</span> = <span style="color: #91a0b3;">await</span> browser.newPage();
  <span style="color: #91a0b3;">await</span> page.<span style="color: #91a0b3;">goto</span>(<span style="color: #ddbc91;">'https://www.baidu.com/'</span>, {
    waitUntil: <span style="color: #ddbc91;">'networkidle2'</span>,
  });
  <span style="color: #91a0b3;">await</span> page.pdf({ path: <span style="color: #ddbc91;">'baidu.pdf'</span>, format: <span style="color: #ddbc91;">'a4'</span> });

  <span style="color: #91a0b3;">await</span> browser.close();
})();
</pre>
</div>
</div>
</body>
</html>