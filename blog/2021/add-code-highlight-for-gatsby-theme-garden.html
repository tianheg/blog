<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-02-08 Tue 15:01 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>为 gatsby-theme-garden 添加代码高亮</title>
<meta name="generator" content="Org mode">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/base16/dracula.min.css">
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js"></script>
<link rel="stylesheet" href="/theme/site.css"/>
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "d5b841b503ed4d1b8fad459b84d1cc2f"}'></script>
<script defer src="/theme/main.js"></script>
</head>
<body>
<div id="content">
<header>
<h1 class="title">为 gatsby-theme-garden 添加代码高亮</h1>
</header><p>
想为没有代码高亮的主题 =gatsby-theme-garden=，添加代码高亮。一开始采用
=gatsby-remark-prismjs=，却发现它的最新版本和 Gatsby v2
版本并不兼容，而把 Gatsby 迁移到 v3
版本代价很大，需要处理更多的兼容性问题。我开始在 Gatsby
官方仓库里找，终于我找到 <code>gatsby-plugin-theme-ui=。于是，在
=gatsby-config.js</code> 设置：
</p>

<div class="org-src-container">
<pre class="src src-js">module.exports = {
  plugins: [
    {
      resolve: <span style="color: #ddbc91;">'gatsby-plugin-theme-ui'</span>,
      options: {
        prismPreset: <span style="color: #ddbc91;">'prism-twilight'</span>,
      },
    },
  ],
}
</pre>
</div>

<p>
一开始代码过长的话，是可以自动折叠的，即通过可能是 <code>overflow: auto;</code>
这样的 CSS 代码实现。但是，不知道怎么的，过了一段时间却不行了。
</p>

<p>
而且，发现一个问题：
</p>

<p>
在目前的文档结构（=./content/*=）下，意思是：
</p>

<ul class="org-ul">
<li>文件名称中含有中文字符</li>
<li>文件名称中含有空格</li>
</ul>

<p>
当设置 <code>prismPreset</code> 为 <code>prism-twilight=时，和
=gatsby-plugin-local-search</code> 是矛盾的，无法执行
=gatsby develop=成功。目前不明白为什么会有这样的
Bug，以后有时间和精力的话会探究一下。
</p>

<p>
ref:
</p>

<ol class="org-ol">
<li><a href="https://github.com/mathieudutour/gatsby-digital-garden">https://github.com/mathieudutour/gatsby-digital-garden</a></li>
<li><a href="https://www.npmjs.com/package/gatsby-plugin-theme-ui">https://www.npmjs.com/package/gatsby-plugin-theme-ui</a></li>
<li><a href="https://theme-ui.com/packages/prism/">https://theme-ui.com/packages/prism/</a></li>
</ol>
</div>
</body>
</html>