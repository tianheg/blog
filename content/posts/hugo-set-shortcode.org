#+TITLE: Hugo 设置 shortcode
#+DATE: <2020-05-13 Wed 21:38>
#+TAGS[]: 技术 Hugo

[[https://github.com/tianheg/blog/tree/main/themes/tianheg/layouts/shortcodes][最新 shortcode 列表]]

#+BEGIN_QUOTE
使用下面提供的 shortcode 模板时，要去掉 =\= 。
#+END_QUOTE

* Flashcard

[[https://www.mrnice.dev/posts/hugo-flashcard-shortcode-for-study/][Hugo Flashcard Shortcode]]

{{< flashcard question="question" >}}
*answer* /text/
{{< /flashcard >}}

#+BEGIN_SRC html
<style>
.flashcard {
  /* layout and positioning */
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: relative;
  margin-block: 1rem;

  /* notebook "paper" effect */
  background-color: rgba(247, 244, 31, 0.5);
  border-radius: 1rem;
  text-shadow: #494f5c34 0.1em 0.1em 0.1em;

  /* lined grid effect */
  background-image:
      linear-gradient(90deg, #abced430 .1em, transparent .1em), 
      linear-gradient(#abced430 .1em, transparent .1em);
  background-size: 1rem 1rem;
}

.flashcard:before {
  content: '';
  position: absolute;
  top: 0; bottom: 0; left: 0;
  width: 60px;
  background: radial-gradient(#494f5c 6px, transparent 7px) repeat-y;
  background-size: 30px 30px;
  box-sizing: border-box;
}

.notepad-line {
  position: absolute;
  width: 3px;
  height: 100%;
  background-color: rgba(255, 0, 0, 0.5);
  left: 2rem;
}

.flashcard__front {
  background: transparent;
  border: 0;
  padding-top: 1rem;
  padding-bottom: 0.5rem;
padding-inline: 4rem;
  font-size: 1.25em;
  text-shadow: #494f5c34 0.1em 0.1em 0.1em;
  transition: 0.2s;
  cursor: pointer;
}

.flashcard__front:hover {
  text-shadow: #494f5c 0.1em 0.1em 0.1em;
  transform: scale(1.05);
  transition: 0.2s;    
}

.flashcard__back {
  padding-bottom: 1rem;
  padding-top:0.5rem;
  padding-inline: 4rem;
  align-self: start;
  filter:blur(5px) opacity(0.5);
  transition: 0.2s;
}

.unblur {
  filter: blur(0px) opacity(1);
  transition: 0.3s;
}

</style>

<script>
function toggleAnswer(id) {
  let answerElement = document.getElementById(id);
  if (answerElement.classList.contains('unblur')) {
    answerElement.classList.remove('unblur');
  } else {
    answerElement.classList.add('unblur');
  }
}
</script>

{{ with .Get "question" }}
{{ $optOrg := (dict "markup" "org" ) }}

  {{ $seed := now.Format ":time_full" }} {{ $random := delimit (shuffle (split (md5 $seed) "" )) "" }}
  {{ $questionSHA := . | sha1 }} {{ $answerID := printf "answer-id-%s-%s" $questionSHA $random }}
  <div class="flashcard">
    <div class="notepad-line"></div>
    <button class="flashcard__front" onclick="toggleAnswer({{ $answerID }})" role="button">
      {{ . }}
    </button>
    <div class="flashcard__back" id="{{ $answerID }}">
      {{ $.Inner | $.Page.RenderString $optOrg }}
    </div>
  </div>

{{ else }}

  {{ errorf "missing value for param 'question': %s" .Position }}

{{ end }}
#+END_SRC

* Klipse 插入可执行代码片段

#+BEGIN_SRC html
<div class="klipse">
  {{ .Inner }}
</div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/viebel/klipse@master/dist/codemirror.css">
<script>
  window.klipse_settings = {
    selector_eval_js: '.klipse', // css selector for the html elements you want to klipsify
  };
</script>
<script src="https://cdn.jsdelivr.net/gh/viebel/klipse@master/dist/klipse_plugin.min.js"></script>
#+END_SRC

* lab 实验室卡片

#+begin_src html
<style>
.lab {
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  text-align: center;
  position: relative;
  overflow: hidden;
  padding: 24px;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, .07),
    0 2px 4px rgba(0, 0, 0, .05),
    0 12px 24px rgba(0, 0, 0, .05);
}

.lab p {
  color: grey;
}
</style>
<div class="lab">
  {{ if eq (.Get 1) ""}}
    <div>{{ .Get 0 }}</div>
  {{ else }}
    <a href="{{ .Get 1 }}">{{ .Get 0 }}</a>
  {{ end }}
  
  <p>{{ (markdownify .Inner) }}</p>
</div>
#+end_src

#+BEGIN_SRC org
{{\< lab "Demo" "https://tianheg.org/demo/" \>}}
使用基本的 HTML,CSS,JS 绘制的图案或小工具
{{\< \/lab \>}}
#+END_SRC

{{< lab "Demo" "https://tianheg.org/demo/" >}}
使用基本的 HTML,CSS,JS 绘制的图案或小工具
{{< /lab >}}

* monthly 月读模板

#+begin_src html
{{ $options := (dict "markup" "org" ) }}
<dl class="monthly">
  <hr>
  <dt style="margin-bottom: 20px;"><a href="{{ .Get 1 }}">{{ .Get 0 }}</a></dt>
  <dd>{{ .Inner | .Page.RenderString $options }}</dd>
</dl>
#+end_src

#+BEGIN_SRC org
{{\< monthly "入行 14 年，我还是觉得编程很难" "https://www.piglei.com/articles/programming-is-still-hard-after-14-years/" \>}}
阅读记录
{{\< \/monthly \>}}
#+END_SRC

{{< monthly "入行 14 年，我还是觉得编程很难" "https://www.piglei.com/articles/programming-is-still-hard-after-14-years/" >}}
阅读记录
{{< /monthly >}}

* tasklist

#+begin_src html
<style>
.tasklist>ul>li {
  margin: 0;
  padding: 0;
}

.tasklist>ul>li p {
  all: unset;
}
</style>
{{ $options := (dict "markup" "org" ) }}
<div class="tasklist">
  {{ .Inner | .Page.RenderString $options }}
</div>
#+end_src

#+begin_src org
{{\< tasklist \>}}

- test
- +test+

{{\< \/tasklist \>}}
#+end_src

{{< tasklist >}}

- test
- +test+

{{< /tasklist >}}

* align

对文字进行居中、居左、居右的设置。在 =~/layouts/shortcodes/= 下创建 =align.html= ，内容如下：

#+begin_src html
<p style="text-align:{{ index .Params 0 }}">{{ index .Params 1 | markdownify }}</p>
#+end_src

具体简码样式：

#+begin_src org
{{</*/* align left "文字" */*/>}}

{{</*/* align center "文字" */*/>}}

{{</*/* align right "文字" */*/>}}
#+end_src

{{< align left "文字" >}}

{{< align center "文字" >}}

{{< align right "文字" >}}

* github

#+begin_src html
<style>
.github {
  border: 1px solid var(--color-contrast-low);
  border-radius: 3px;
  margin: 0 auto;
  margin-bottom: 1em;
  padding: 1em;
}
.github .github-icon {
  width: 1.2em;
  height: 1.2em;
  margin-right: 0.5em;
  margin-bottom: 0.2em;
  fill: var(--color-contrast-high);
  transition: all .5s;
}

.github .name {
  font-weight: bold;
  color: var(--color-primary);
  text-decoration: none;
}

.github .description {
  margin-top: 0.5em;
  margin-bottom: 1em;
  color: var(--color-contrast-high);
  text-align: justify;
  font-size: 90%;
  transition: all .5s;
}

.github .language-color {
  position: relative;
  top: 1px;
  display: inline-block;
  width: 0.75em;
  height: 0.75em;
  border-radius: 50%;
}

.github .language-name {
  color: var(--color-contrast-high);
  font-size: 90%;
  margin-left: 0.5em;
  transition: all .5s;
}
</style>

<div class="github">
    <div class="logo">
        {{ replace $.Site.Data.SVG.repository "icon" "icon github-icon" | safeHTML }}
        <a class="name" href={{ .Get "link" }} target="_blank">{{ .Get "name" }}</a>
    </div>
    <div class="description">{{ .Get "description" }}</div> 
    <div class="language">
        <span class="language-color" style="background-color: {{ .Get "color" }}"></span>
        <span class="language-name">{{ .Get "language" }}</span>
    </div>
</div>
#+end_src

还需要在 =~/data/SVG.toml= 文件中插入图标：

#+begin_src toml
# GitHub Icon
repository = '<svg xmlns="http://www.w3.org/2000/svg" class="icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M2 2.5C2 1.83696 2.26339 1.20107 2.73223 0.732233C3.20108 0.263392 3.83696 0 4.5 0L13.25 0C13.4489 0 13.6397 0.0790176 13.7803 0.21967C13.921 0.360322 14 0.551088 14 0.75V13.25C14 13.4489 13.921 13.6397 13.7803 13.7803C13.6397 13.921 13.4489 14 13.25 14H10.75C10.5511 14 10.3603 13.921 10.2197 13.7803C10.079 13.6397 10 13.4489 10 13.25C10 13.0511 10.079 12.8603 10.2197 12.7197C10.3603 12.579 10.5511 12.5 10.75 12.5H12.5V10.5H4.5C4.30308 10.5 4.11056 10.5582 3.94657 10.6672C3.78257 10.7762 3.65442 10.9312 3.57816 11.1128C3.50191 11.2943 3.48096 11.4943 3.51793 11.6878C3.5549 11.8812 3.64816 12.0594 3.786 12.2C3.92524 12.3422 4.0023 12.5338 4.00024 12.7328C3.99818 12.9318 3.91716 13.1218 3.775 13.261C3.63285 13.4002 3.4412 13.4773 3.24222 13.4752C3.04325 13.4732 2.85324 13.3922 2.714 13.25C2.25571 12.7829 1.99929 12.1544 2 11.5V2.5ZM12.5 1.5V9H4.5C4.144 9 3.806 9.074 3.5 9.208V2.5C3.5 2.23478 3.60536 1.98043 3.79289 1.79289C3.98043 1.60536 4.23478 1.5 4.5 1.5H12.5ZM5 12.25V15.5C5 15.5464 5.01293 15.5919 5.03734 15.6314C5.06175 15.6709 5.09667 15.7028 5.1382 15.7236C5.17972 15.7444 5.22621 15.7532 5.27245 15.749C5.31869 15.7448 5.36286 15.7279 5.4 15.7L6.85 14.613C6.89328 14.5805 6.94591 14.563 7 14.563C7.05409 14.563 7.10673 14.5805 7.15 14.613L8.6 15.7C8.63714 15.7279 8.68131 15.7448 8.72755 15.749C8.77379 15.7532 8.82028 15.7444 8.8618 15.7236C8.90333 15.7028 8.93826 15.6709 8.96266 15.6314C8.98707 15.5919 9 15.5464 9 15.5V12.25C9 12.1837 8.97366 12.1201 8.92678 12.0732C8.87989 12.0263 8.81631 12 8.75 12H5.25C5.1837 12 5.12011 12.0263 5.07322 12.0732C5.02634 12.1201 5 12.1837 5 12.25Z"/></svg>'
#+end_src

你需要在简码中填写仓库名 =name= ，仓库链接 =link= ，仓库描述 =description= ，代码语言 =language= ，代码语言对应的颜色 =color= 。

具体简码和样式如下：

#+begin_src org
{{\< github name="blog" link="https://github.com/tianheg/blog" description="Blog Source Files" color="#E34C26" language="HTML" \>}}
#+end_src

{{< github name="blog" link="https://github.com/tianheg/blog"
description="Blog Source Files" color="#E34C26" language="HTML">}}

* highlight

#+begin_src html
添加/layouts/shortcodes/highlight.html：
<highlight html >
<section id="main">
  <div>
   <h1 id="title">{{ .Title }}</h1>
    {{ range .Data.Pages }}
        {{ .Render "summary"}}
    {{ end }}
  </div>
</section>
</highlight >
#+end_src

参考资料

- [[https://gohugo.io/content-management/shortcodes/#readout]]
- [[https://guanqr.com/tech/website/hugo-shortcodes-customization/][自定义 Hugo Shortcodes 简码]]
- [[https://hugoloveit.com/zh-cn/theme-documentation-extended-shortcodes/][主题文档 - 扩展 Shortcodes]]
- [[https://www.ii.com/hugo-renderstring/][ii.com: Hugo’s .RenderString Method (featuring AsciiDoc admonitions in Markdown and Go HTML)]]
