---
title: 新手学黑客攻防-进程与黑客常用基本命令
categories: ["技术"]
toc: true
date: 2020-03-18T10:56:03+08:00
tags: ["进程", "黑客常用命令", "基础"]
---

### 木马藏身之处——系统进程

因为木马存在于系统中，所以无法彻底和系统进程脱离关系，即使采用了隐藏技术，也还是能够从系统进程中找到蛛丝马迹，因此，查看系统中活动的进程成为检测木马最直接的方法。

#### 认识系统进程

系统进程是系统或应用程序的一次动态执行。简单地说，它是操作系统当前运行的执行程序。在系统中打开任何一个软件，系统便会在后天加载相应的进程。

在系统当前运行的执行程序里包括：系统管理计算机个体和完成各种操作所必须的程序；还有用户开启、执行的额外程序，当然也包括用户不知道的、自动运行的具有重要作用的程序，正是因为进程具有这种特性，所以它也经常受到 “ 入侵 ” 。

#### 打开系统进程

操作很简单，在桌面的任务栏处，单击鼠标右键，在弹出的快捷菜单中选择`Task Manager`，在弹出的`Task Manager`窗口中，切换到`processes`选项卡即可查看系统进程。

另外，还可以使用快捷键打开系统进程。按下`Ctrl`+`Alt`+`Del`组合键，在弹出的界面中单击`Task Manager`，然后切换到`processes`选项卡即可查看系统进程。

#### 关闭和新建系统进程

用户在`processes`选项卡中，可以对系统进程进行查看、关闭和新建等操作。

##### 关闭系统进程

要关闭系统进程，只需要选中相应的系统进程，然后单击窗口右下角的`End task`按钮即可；也可以在选中进程后单击鼠标右键，也能够结束进程。

但是，在关闭某些系统进程时要注意，比如关闭`explorer.exe`进程，由于该进程用于管理`Windows`图形壳，包括【开始】菜单、任务栏、桌面和文件管理。删除该程序会导致`Windows`图形界面无法使用，鼠标也没有响应。

##### 新建系统进程

下面以新建`explorer.exe`进程为例，介绍创建系统进程的操作步骤。

在刚才打开的`processes`选项卡界面中，点击`File`，选择`Run new task`，在`Open`后输入`explorer.exe`，然后点击 OK 即可。

#### 查看隐藏进程

你可以从[NoVirusThanks](https://www.novirusthanks.org/)网站下载`hidden_process_finder_portable`（隐藏进程查看器便携版），这样可以直接看到系统中的隐藏进程，扫描一遍后我的电脑没找到隐藏进程，说明我的电脑暂时还没有木马病毒。

#### 查看远程进程

查看远程电脑的进程是黑客的基本功，也是它们经常干的事情，其方法很简单。具体的操作方法是：在`Command Prompt`输入`tasklist /s 192.168.1.122 /u Admin /p 123456`，按下`Enter`键，稍等片刻就可以得到远程电脑反馈回来的进程列表信息了。

其中`/s`参数后的“192.168.1.122”是指要查看远程系统的 IP 地址；`/u`参数后的`Admin`是指`tasklist`命令使用的用户账户；`/p`参数后的“123456”是指`Admin`账户的密码。

通过上面的命令可以得到远程电脑的进程列表，然后黑客就可以判断出自己植入的木马等程序是否在远程电脑上运行。

### 黑客常用基本命令

黑客使用的命令很多，掌握各种命令的使用方法是防御黑客攻击最基本的要求。下面简单介绍一下黑客常用命令的使用方法。

#### ping 命令

ping 命令是黑客首先要掌握的命令，主要用来检查网络是否畅通和网络连接的速度，它所利用的原理是：网络上的计算机都有唯一确定的 IP 地址，用户给目标 IP 地址发送一个数据包，对方就要返回一个同样大小的数据包，根据返回的数据包可以确定目标主机的存在，初步判断目标主机的操作系统等信息。

ping 命令事实上是一个测试程序，如果 ping 命令运行正确，基本上可以排除物理层、数据链路层和网络层存在故障的可能性，从而大大减小出现问题的范围。按照 Windows 的默认设置，其 ping 命令发送 4 个 ICMP （网间控制报文协议）回送请求，每个为 32 字节，如果一些正常，应该能得到 4 个回送应答。 ping 命令可以以毫秒为单位显示发送回送请求到返回回送应答之间的时间量，时间量越小，代表数据包通过的路由器越少或网速越快。

在 Windows 10 系统中利用 ping 命令测试网络连通状态的具体步骤如下。

步骤1、在`Command Prompt`输入 ping 命令，ping 命令的格式为“ping+空格+IP地址”，例如，我们输入`ping 220.181.38.148`，然后按下【Enter】键。如果显示有字节的回复，就说明当前使用的主机可以访问该 IP 地址；如果显示`Request timed out.`则说明无法访问。

步骤2、此外，用户还可以使用“ping+空格+网址”的方法测试本机与网络上某个远程主机的连通状态。例如，在`Command Prompt`中输入`ping baidu.com`，按下【Enter】键后可以看到网络是连通的。

下面介绍 ping 命令的几个常用参数。

`-l size`：这是 L 的小写，不是阿拉伯数字 1 。发送 size 指定数据量的数据包。在默认的情况下， ping 命令发送数据包的大小为 32 字节，使用`-l size`可以重新定义发送数据包的大小，但有一个大小的限制，就是最大只能发送 65532 字节，这是因为 Windows 系列操作系统都有一个安全漏洞，就是当向对方一次发送的数据包不小于 65532 字节时，对方就可能无法正常工作，微软公司为了解决这一安全漏洞，就限制了 ping 的数据包大小。

`-f`：在数据包中发送“不要分段”标志，数据包就不会被路由上的网关分段，通常所发送的数据包都会先通过路由分段再发送给目标主机，加上此参数后路由就不会再进行分段处理。

`-i TTL`：指定 TTL 值在目标主机的系统中停留的时间。

`-v tos`：将“服务类型”字段设置为 tos 指定的值。

`-r count`：在“记录路由”字段中记录传出和返回数据包的路由。一般情况下，发送的数据包是通过一个个路由才到达目标地址的，但到底经过了哪些路由呢？通过此参数就可以设定想探测经过的路由的个数，不过限制只能跟踪到 9 个路由。

#### netstat 命令

netstat 命令用来查看网络状态，其操作简便，功能也很强大，主要用于显示与 IP、TCP、UDP 以及 ICMP 相关的统计数据，一般用于检查本机各端口的网络连接情况。该命令格式如下。

netstat [-a] [-b] [-e] [-n] [-o] [-p proto] [-r] [-s] [-v] [interval]

`-a`：显示所有连接和监听的端口

`-b`：显示包含于创建于每个连接或监听端口的可执行组件。

`-e`：显示以太网统计信息。

`-n`：以数字形式显示地址和端口号。

`-o`：显示与每个连接相关的所属进程 ID。

`-p proto`：显示 proto 指定的协议的连接。

`-r`：显示路由表。

`-s`：显示按协议统计。

`-v`：显示所有可执行组件。

`Interval`：重新显示选定的统计信息，每次显示之间有一个时间间隔（以秒计），按【Ctrl】+【C】组合键停止显示统计信息。如果省略，netstat 则显示当前的配置信息。

#### net 命令

net 命令是功能强大的以命令行方式执行的工具。它具有管理网络环境、服务、用户、登录等管理功能，内置于 Windows 系统中。下面介绍几种 net 命令的不同用法。

##### net localgroup

该命令用于添加、显示或更改用户组。命令格式为`net localgroup groupname{/add[/comment:text]|/delete}[/domain]`。

其中，“groupname”是要添加、补充或删除的本地组的名称；“/add”是将全局组名或用户名添加到本地组中；“comment:text”是为新建或现有组添加注释；“/delete”是从本地组中删除组名或用户名；“/domain”是在当前域的主域控制器中执行操作。

在`Command Prompt`窗口中输入不带参数的“net localgroup”，显示服务器名称和计算机的本地组名称。

在介绍命令之前先创建一个用于实验的组，具体的操作如下。

对于 Windows 10 ，鼠标右键单击【开始】，点击`Computer Management`，在`System Tools`下找到`Local Users and Groups`，点选`Groups`，鼠标右键单击`New Group...`，在`Group Name`处输入`experiment`。点击`Create`，再点击`Close`。这样就新建了一个组名为“experiment”的用户组。

下面介绍该命令的常用参数。

/comment "text"：为新建或现有组添加注释。

name：列出要添加到本地组或从本地组中删除的一个或多个用户名或组名。输入命令`net localgroup experiment exper1 /add`，就可以将用户“exper1”加入组“experiment”中（在运行该命令之前先用“net user exper1 /add”命令创建“exper1”用户）。

/domain：在当前域的主域控制器中进行操作，否则仅在本地计算机上进行操作。输入命令`net localgroup /domain`，如果没有域控制器，就会出现错误，错误号为 1355。

/add：将全局组名或用户名添加到本地组中。

/delete：从本地组中删除组名或用户名。输入命令`net localgroup experiment exper1 /delete`，就可以将用户“exper1”从组“experiment”中删除。

##### net user

net user 命令主要用来显示账户信息，修改、添加或删除账户。命令格式为`net user[username[password|*]][/domain]`或`net user[username[password|*]]/add[options][/domain]`或`net user[username[/delete][/domain]]`。

其中，username 指定要添加、删除、修改或查看的用户账户名称，password 为用户账户指定或修改密码。输入星号（*）将给出密码的提示，在密码提示符下输入密码时不显示密码。domain 是指在域控制器上进行操作。

步骤1、输入不加参数的net user命令查看计算机上的用户列表。

步骤2、建立一个用户名为“explorer”、密码为“123”的账户，命令为“net user explorer 123 /add”。

步骤3、用“net user”命令查看账户是否添加成功。

步骤4、对上面建立的用户的密码进行修改，由“123”改为“456”，命令为net user explorer 456。

步骤5、使用这个命令还可以将用户帐户删除，例如，删除“explorer”账户的命令是net user explorer /delete。

步骤6、用“net user”命令查看，可以发现“explorer”账户已被删除。

#### DOS 基本命令

DOS 作为微软开发的第一款操作系统，虽然功能不是很强大，但由于其命令操作快捷，所以随着操作系统的发展保留了下来，且功能越来越强大。

DOS 命令从文件和磁盘操作到网络和多媒体操作等都能方便地做到，而且能做许多在 Windows 等系统或环境下做不到或做不好的事。

下面介绍几个常用的 DOS 命令（DOS命令是不区分大小写的）。

##### DIR 命令

DIR 命令用来显示文件和文件夹（目录），其命令格式为：DIR [文件名] [参数]。它有很多参数，如 /A 表示显示所有文件（包括隐藏属性和系统属性的文件），/S 表示显示子文件夹中的文件，/P 表示分屏显示，/B 表示只显示文件名。

步骤1、用不带参数的命令浏览 D 盘下的文件，其命令为“DIR D:”。

步骤2、如果用户想查看隐藏文件和系统文件，就需要加上参数“/A”，命令为“DIR D:/A”。

步骤3、如果只输入“DIR”，就表示查看当前路径下的文件。

##### CD 命令

CD（CHDIR）命令用来退出或进入文件夹，这个命令常和 DIR 命令一起使用。

步骤1、当用户想要返回当前目录的上一级目录时，就需要输入“CD..”命令。

步骤2、如果用户想要直接回到当前目录的根目录，就需要输入“CD\”命令。

步骤3、直接输入“盘符:”后按下【Enter】键就可以改变盘符，例如，输入“d:”将盘符改到了 D 盘。

步骤4、CD 命令更多的时候是用来进入一个文件夹，命令格式为：CD[文件夹名]。例如，输入“cd Program Files”可以进入 D 盘下的 Program Files 文件夹。

##### MD 和 RD 命令

MD 命令用于新建一个文件夹，RD 命令用于删除一个文件夹。新建一个文件夹的命令是 MD[文件夹名]，同样，删除一个文件夹的命令是 RD[文件夹名]。

步骤1、在 D 盘根目录下新建一个名为“exp”的文件夹，输入`md exp`。

步骤2、进入【（D:）】窗口，就会看到新建立的文件夹。

步骤3、用 RD 命令删除刚刚建立的文件夹（只能用来删除空文件夹），命令为RD exp。

步骤4、如果是非空文件夹，则要加参数/S。例如，删除 D 盘根目录下的非空文件夹 new ，输入“`rd new /s`”，当提示确认时输入 “ y ” 即可。

##### DEL 命令

该命令用于删除文件，格式为：DEL[文件名]。

例如，删除 E 盘目录下的 `shiyan.docx`。

##### COPY 命令

该命令用来复制文件或合并文件。

复制文件的命令格式为：COPY [源路径名] [源文件名] [目标路径名]。

**注意：在我的  Windows 10 系统中，按照如上操作时，会出现`The system cannot find the file specified`错误，目前还没有找到解决的办法。**

这个问题解决了，下面是解决过程：

`copy D:\A A A\Downloads\test1.txt D:\A A A\Desktop\`是我最初的命令，输入后返回上面的错误，我又在管理员模式的命令提示符下试了一次，还是出错。

谷歌"`The system cannot find the file specified`"，从一篇文章中找到一个方法：在管理员模式的命令提示符下输入`sfc /scannow`检查问题并修复。

这一指令我用过，以前执行完毕，都没有问题，显示正常。但这次执行完不一样，它出现了如下内容：

`Windows Resource Protection found corrupt files and successfully repaired them. For online repairs, details are included in the CBS log file located at windir\Logs\CBS\CBS.log. For example C:\Windows\Logs\CBS\CBS.log. For offline repairs, details are included in the log file provided by the /OFFLOGFILE flag.`

还好修复了一些问题，此时命令提示符依然是管理员模式，于是我重复执行上述 COPY 命令，依然不行。这时，我想：会不会是文件夹空格的问题。请看我的路径：文件夹 A A A 的名称中存在空格。所以，我做了改动：`copy D:\"A A A"\Downloads\test1.txt D:\"A A A"\Desktop\`，然后就 COPY 成功了。

总结：

一、`sfc /scannow`功不可没

二、空格问题，在看到 CD 命令时就已经注意到，当时如果打开一个带有空格的文件夹，会带引号，如`cd D:\"A A A"`。但是，我用`cd D:\A A A`时发现也能够打开，于是，我就想当然地认为 COPY 命令也是如此。所以，就犯了 “ 空格 ” 这个错误。

合并文件的命令格式为：COPY /B [文件1+文件2+…文件N] [合并后的文件名]。

步骤1、将 E 盘下的 1.txt、2.txt 和 3.txt 合并为 4.txt 文件，命令为 COPY /B 1.txt+2.txt+3.txt 4.txt。

步骤2、打开 E 盘会发现合并出了一个 4.txt 文件。

**新手问题解答**

一、如何使用 DOS 命令向计算机系统中注入一个 “ .dll ” 文件。

电脑在使用过程中，有时候会遇到 “ .dll ” 文件丢失的现象，在下载 “ .dll ” 文件后，需要将其添加到电脑系统盘中的 system32 文件夹中。

在下载 “ .dll ” 文件所在的文件夹里，在路径框内输入 cmd ，就可以打开当前路径下的命令提示符。这可是个新技能，看 B 站学的，所以上 B 站学习不是空话，哈哈。

然后利用 copy 命令将其添加到系统盘下的 system32 文件夹中（一般添加到C:\Windows\system32目录下）。

二、如何检测与某个计算机的连通性

在命令提示符窗口中，输入`ping X`（X 为该计算机的 IP 地址），然后按下【Enter】键即可。